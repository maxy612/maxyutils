"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_timer=null,scrollToPos=function(e){var t={pos:0,el:r||"html",isVertical:!0,speed:6};if("object"!==(void 0===e?"undefined":_typeof(e))){if("number"!=typeof e)return void console.error("scrollToPos: 参数应为大于等于0的数字或对象");t.pos=e}if(null!==e){if("object"===(void 0===e?"undefined":_typeof(e))&&"[object Object]"===Object.prototype.toString.call(e))for(var o in t)void 0!==e[o]&&(t[o]=e[o]);var i=t.pos,r=t.el,n=t.isVertical,l=t.speed;if("number"!=typeof i||i<0||isNaN(i))console.error("scrollToPos: 滚动参数pos应为大于等于0的数字");else{_timer&&(window.cancelAnimationFrame(_timer),_timer=null);var a=document.querySelector(r),s=document.documentElement||document.body;if(a){var c=n?a.offsetHeight:a.offsetWidth,d=n?s.clientHeight:s.clientWidth,m=Math.abs(c-d)<20?0:c-d-20;if(c<=d)throw Error("请确认当前传入的内容区高/宽度大于视窗高／宽度（此时才会出现滚动条）");m<i&&(i=Math.max(0,m)),_timer=function(){var e,t=n?window.scrollY:window.scrollX,o=Math.abs(i-t);if(o<l)return window.scrollTo(n?0:i,n?i:0),window.cancelAnimationFrame(_timer),void(_timer=null);e=Math.floor(o/l),i<t&&(t-=e),t<i&&(t+=e),window.scrollTo(n?0:t,n?t:0),window.requestAnimationFrame(_timer)},window.requestAnimationFrame(_timer)}else console.error("指定的el不存在")}}else console.error("scrollToPos: 参数应为大于等于0的数字或对象")},ImgLazyload={init:function(e){var t=e.container,o=void 0===t?"html":t,i=e.defaultImg,r=void 0===i?"":i,n=e.errorImage,l=void 0===n?"":n,a=e.delay,s=void 0===a?500:a;this.el=document.querySelector(o),this.children=[],this.defaultImg=r,this.errorImage=l,this.delay=s,this.getLazyLoadEls();var c=document.documentElement;this.wHeight=c.clientHeight,this.wWidth=c.clientWidth;var d=this.throttle();window.addEventListener&&(window.addEventListener("scroll",d,!0),window.addEventListener("touchmove",d,!0),window.addEventListener("load",d,!0))},throttle:function(){var t=this,o=Date.now();return this.check(),function(){var e=Date.now();e-o>t.delay&&(t.check(),o=e)}},getLazyLoadEls:function(){for(var e=this.el.querySelectorAll("*[lazyload]"),t=0,o=e.length;t<o;t++)this.children.push(e[t]),this.defaultImg&&this.setImageForEl(e[t],this.defaultImg)},setImageForEl:function(e,t){1===e.nodeType&&("string"==typeof e.tagName&&"img"===e.tagName.toLowerCase()?e.src=t:e.style.backgroundImage="url("+(t||"")+")")},checkInView:function(e){var t=e.getBoundingClientRect(),o=t.x,i=t.y,r=t.width,n=t.height;return o<this.wWidth&&-r<o&&i<this.wHeight&&-n<i},check:function(){var t=this;this.getLazyLoadEls(),this.children.length&&this.children.forEach(function(e){t.checkInView(e)&&t.handleElInView(e)})},handleElInView:function(e){var t=this;if(1===e.nodeType){var o=e.getAttribute("lazyload");if(o){var i=new Image;i.src=o,e.removeAttribute("lazyload"),i.addEventListener("load",function(){t.setImageForEl(e,o)},!1),i.addEventListener("error",function(){t.errorImage&&t.setImageForEl(e,t.errorImage),t.defaultImg&&t.setImageForEl(e,t.defaultImg)},!1)}}}},canUseCookie=function(){return"undefined"!=typeof document},ONEDAY=864e5,DEFAULTEXPIRES=new Date((new Date).getTime()+ONEDAY).toGMTString(),Cookie={set:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{expires:DEFAULTEXPIRES};e&&canUseCookie()&&(document.cookie=e+"="+t+";expires="+o.expires)},formatCookie:function(){if(!canUseCookie())return{};var e=void 0,t=void 0,o=document.cookie,i={};if((o=o.split(";")).length)for(e=0;e<o.length;e++)(t=o[e].trim().split("="))&&t[0]&&t[1]&&(i[t[0].trim()]=t[1].trim());return i},get:function(e){var t=void 0;try{"string"==typeof(t=JSON.parse(JSON.stringify(this.formatCookie()[""+e])))&&(t=JSON.parse(t))}catch(e){}return t},clear:function(e){canUseCookie()&&(document.cookie=e+"=null;expires=-1")}},index={scrollToPos:scrollToPos,ImgLazyload:ImgLazyload,Cookie:Cookie};module.exports=index;
