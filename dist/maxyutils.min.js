!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.maxyutils=t()}(this,function(){"use strict";var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),m=null;return{scrollToPos:function(e){var t={pos:0,el:r||"html",isVertical:!0,speed:6,interval:10};if("object"!==(void 0===e?"undefined":h(e))){if("number"!=typeof e)return void console.error("scrollToPos: 参数应为大于等于0的数字或对象");t.pos=e}if(null!==e){if("object"===(void 0===e?"undefined":h(e))&&"[object Object]"===Object.prototype.toString.call(e))for(var o in t)void 0!==e[o]&&(t[o]=e[o]);var n=t.pos,r=t.el,i=t.isVertical,l=t.speed,a=t.interval;if("number"!=typeof n||n<0||isNaN(n))console.error("scrollToPos: 滚动参数pos应为大于等于0的数字");else{m&&(clearInterval(m),m=null);var c=document.querySelector(r),s=document.documentElement||document.body;if(c){var u=i?c.offsetHeight:c.offsetWidth,d=i?s.clientHeight:s.clientWidth,f=Math.abs(u-d)<20?0:u-d-20;if(u<=d)throw Error("请确认当前传入的内容区高/宽度大于视窗高／宽度（此时才会出现滚动条）");f<n&&(n=Math.max(0,f)),m=setInterval(function(){var e,t=i?window.scrollY:window.scrollX,o=Math.abs(n-t);if(o<l)return window.scrollTo(i?0:n,i?n:0),clearInterval(m),void(m=null);e=Math.floor(o/l),n<t&&(t-=e),t<n&&(t+=e),window.scrollTo(i?0:t,i?t:0)},a)}else console.error("指定的el不存在")}}else console.error("scrollToPos: 参数应为大于等于0的数字或对象")},ImgLazyload:function(){function u(e){var t=e.container,o=void 0===t?"html":t,n=e.defaultImg,r=void 0===n?"":n,i=e.errorImage,l=void 0===i?"":i,a=e.delay,c=void 0===a?500:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.el=document.querySelector(o),this.children=[],this.defaultImg=r,this.errorImage=l,this.delay=c,this.getLazyLoadEls();var s=document.documentElement;this.wHeight=s.clientHeight,this.wWidth=s.clientWidth,this.init()}return e(u,[{key:"init",value:function(){var e=this.throttle();window.addEventListener&&(window.addEventListener("scroll",e,!1),window.addEventListener("touchmove",e,!1),window.addEventListener("load",e,!1))}},{key:"throttle",value:function(){var t=this,o=Date.now();return this.check(),function(){var e=Date.now();e-o>t.delay&&(t.check(),o=e)}}},{key:"getLazyLoadEls",value:function(){for(var e=this.el.querySelectorAll("*[lazyload]"),t=0,o=e.length;t<o;t++)this.children.push(e[t]),this.defaultImg&&this.setImageForEl(e[t],this.defaultImg)}},{key:"setImageForEl",value:function(e,t){1===e.nodeType&&("string"==typeof e.tagName&&"img"===e.tagName.toLowerCase()?e.src=t:e.style.backgroundImage="url("+(t||"")+")")}},{key:"checkInView",value:function(e){var t=e.getBoundingClientRect(),o=t.x,n=t.y,r=t.width,i=t.height;return o<this.wWidth&&-r<o&&n<this.wHeight&&-i<n}},{key:"check",value:function(){var t=this;this.children.forEach(function(e){t.checkInView(e)&&t.handleElInView(e)})}},{key:"handleElInView",value:function(e){var t=this,o=e.getAttribute("lazyload"),n=new Image;n.src=o,n.addEventListener("load",function(){t.setImageForEl(e,o)},!1),n.addEventListener("error",function(){t.errorImage&&t.setImageForEl(e,t.errorImage),t.defaultImg&&t.setImageForEl(e,t.defaultImg)},!1)}}]),u}()}});
